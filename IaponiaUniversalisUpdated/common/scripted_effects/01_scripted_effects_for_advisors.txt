#All are Country Scope unless otherwise stated.

#Sets flags to use when generating advisors, must be used in immediate = { } and be followed by erase_advisor_flags_effect in after = {}
check_if_non_state_advisor_effect = {}

erase_advisor_flags_effect = { #Goes into the after = {} effect after check_if_non_state_advisor_effect
	trigger_switch = {
		on_trigger = has_country_flag
		state_religion_advisor = { clr_country_flag = state_religion_advisor }
		jewish_advisor = { clr_country_flag = jewish_advisor }
		protestant_or_coptic_advisor = { clr_country_flag = protestant_or_coptic_advisor }
		reformed_or_orthodox_advisor = { clr_country_flag = reformed_or_orthodox_advisor }
		heathen_advisor = { clr_country_flag = heathen_advisor }
		zoroastrian_advisor = { clr_country_flag = zoroastrian_advisor }
		sikh_advisor = { clr_country_flag = sikh_advisor }
		confucian_advisor = { clr_country_flag = confucian_advisor }
		shinto_advisor = { clr_country_flag = shinto_advisor }
		theravada_advisor = { clr_country_flag = theravada_advisor }
		mahayana_advisor = { clr_country_flag = mahayana_advisor }
		vajrayana_advisor = { clr_country_flag = vajrayana_advisor }
		kirishitan_advisor = { clr_country_flag = kirishitan_advisor }
		hinduism_advisor = { clr_country_flag = hinduism_advisor }
		ibadi_advisor = { clr_country_flag = ibadi_advisor }
		shia_advisor = { clr_country_flag = shia_advisor }
		sunni_advisor = { clr_country_flag = sunni_advisor }
		coptic_advisor = { clr_country_flag = coptic_advisor }
		norse_advisor = { clr_country_flag = norse_advisor }
		animism_advisor = { clr_country_flag = animism_advisor }
		totemism_advisor = { clr_country_flag = totemism_advisor }
		inca_advisor = { clr_country_flag = inca_advisor }
		nahuatl_advisor = { clr_country_flag = nahuatl_advisor }
		mayan_advisor = { clr_country_flag = mayan_advisor }
	}
}

internal_advisor_generation_effect = { #Only used within generate_advisor_of_type_and_semi_random_religion_effect
#Requires check_if_non_state_advisor_effect in immediate as that gives the arguments to generate_advisor_of_type_and_semi_random_religion_effect that then passes it on to this.
#$advisor_type$ = Advisor type if state religion.
#$advisor_type_if_not_state$ = Advisor type if non-state religion.
#$skill$ = Skill Level
#$discount$ = yes/no for discount
	trigger_switch = {
		on_trigger = has_country_flag #Flags set by check_if_non_state_advisor_effect
		state_religion_advisor = {
			define_advisor = {
				type = $advisor_type$
				skill = $skill$
				discount = $discount$
			}
		}
		heathen_advisor = {
			if = {
				limit = {
					religion_group = christian
					capital_scope = { continent = europe }
				}
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
					religion = jewish
				}
			}
			else_if = {
				limit = { religion_group = christian }
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
					religion = sunni
				}
			}
			else_if = {
				limit = {
					religion_group = muslim
					capital_scope = {
						OR = {
							continent = europe
							region = horn_of_africa_region
							region = maghreb_region
						}
						NOT = { region = caucasia_region }
						NOT = { region = anatolia_region }
					}
				}
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
					religion = kirishitan
				}
			}
			else_if = {
				limit = {
					religion_group = muslim
					capital_scope = {
						OR = {
							region = caucasia_region
							region = anatolia_region
						}
					}
				}
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
					religion = coptic
				}
			}
			else_if = {
				limit = { religion_group = muslim }
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
					religion = zoroastrian
					culture = parsi
				}
			}
			else_if = {
				limit = {
					religion_group = eastern #Most likely won't come here but could.
				}
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
					religion = animism
				}
			}
			else_if = {
				limit = { 
					religion_group = dharmic
					capital_scope = {
						OR = {
							region = persia_region
							region = khorasan_region
							region = west_india_region
							region = hindusthan_region
						}
					}
				}
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
					religion = shiite
					culture = persian
				}
			}
			else_if = {
				limit = {
					religion_group = dharmic #Most likely won't come here but could.
				}
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
					religion = animism
				}
			}
			else = {
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
				}
			}
		}
		sikh_advisor = {
			if = {
				limit = { religion = sikhism }
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					religion = hinduism
					discount = $discount$
				}
			}
			else_if = {
				limit = { is_religion_enabled = sikhism }
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					religion = sikhism
					discount = $discount$
				}
			}
			else_if = {
				limit = { religion = hinduism }
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					religion = zoroastrian
					culture = parsi
					discount = $discount$
				}
			}
			else_if = {
				limit = { religion_group = muslim }
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					religion = hinduism
					discount = $discount$
				}
			}
			else = {
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
				}
			}
		}
		confucian_advisor = {
			define_advisor = {
				type = $advisor_type_if_not_state$
				skill = $skill$
				religion = confucianism
				discount = $discount$
			}
		}
		shinto_advisor = {
			define_advisor = {
				type = $advisor_type_if_not_state$
				skill = $skill$
				religion = shinto
				discount = $discount$
			}
		}
		theravada_advisor = {
			define_advisor = {
				type = $advisor_type_if_not_state$
				skill = $skill$
				religion = buddhism
				discount = $discount$
			}
		}
		mahayana_advisor = {
			define_advisor = {
				type = $advisor_type_if_not_state$
				skill = $skill$
				religion = mahayana
				discount = $discount$
			}
		}
		vajrayana_advisor = {
			define_advisor = {
				type = $advisor_type_if_not_state$
				skill = $skill$
				religion = vajrayana
				discount = $discount$
			}
		}
		kirishitan_advisor = {
			if = {
				limit = {
					any_province = {
						religion = kirishitan
						has_discovered = ROOT
					}
				}
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					religion = kirishitan
					discount = $discount$
				}
			}
			else = {
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					discount = $discount$
				}
			}
		}
		animism_advisor = {
			if = {
				limit = { NOT = { religion = animism } }
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					religion = animism
					discount = $discount$
				}
			}
			else = {
				define_advisor = {
					type = $advisor_type_if_not_state$
					skill = $skill$
					religion = totemism
					discount = $discount$
				}
			}
		}
	}
}

generate_advisor_of_type_and_semi_random_religion_effect = {
#Actual work is done by internal_advisor_generation_effect above but it goes through this first.
#Requires check_if_non_state_advisor_effect in immediate.
#$advisor_type$ = Advisor type if state religion.
#$advisor_type_if_not_state$ = Advisor type if non-state religion.
#$scaled_skill$ = yes/no
#$skill$ = Skill Level
#$discount$ = yes/no for discount
	
	[[scaled_skill]
		if = {
			limit = {
				NOT = { monthly_income = 15 }
			}
			internal_advisor_generation_effect = {
				advisor_type = $advisor_type$
				advisor_type_if_not_state = $advisor_type_if_not_state$
				skill = 1
				discount = $discount$
			}
		}
		else_if = {
			limit = {
				NOT = { monthly_income = 25 }
			}
			internal_advisor_generation_effect = {
				advisor_type = $advisor_type$
				advisor_type_if_not_state = $advisor_type_if_not_state$
				skill = 2
				discount = $discount$
			}
		}
		else = {
			internal_advisor_generation_effect = {
				advisor_type = $advisor_type$
				advisor_type_if_not_state = $advisor_type_if_not_state$
				skill = 3
				discount = $discount$
			}
		}
	]
	[[skill]
		internal_advisor_generation_effect = {
			advisor_type = $advisor_type$
			advisor_type_if_not_state = $advisor_type_if_not_state$
			skill = $skill$
			discount = $discount$
		}
	]
}

#Use this one if you just want a scaled advisor
generate_scaled_advisor_of_type_and_religion_effect = {
	#$type$ = Advisor type
	#$religion$ = Advisor religion
	#$discount$ = yes/no for discount
		
	if = {
		limit = {
			NOT = { monthly_income = 15 }
		}
		define_advisor = {
			type = $type$
			religion = $religion$
			skill = 1
			discount = $discount$
		}
	}
	else_if = {
		limit = {
			NOT = { monthly_income = 25 }
		}
		define_advisor = {
			type = $type$
			religion = $religion$
			skill = 2
			discount = $discount$
		}
	}
	else = {
		define_advisor = {
			type = $type$
			religion = $religion$
			skill = 3
			discount = $discount$
		}
	}
}

#Use this one if you just want a scaling advisor with cost multiplier
generate_scaled_advisor_of_type_and_cost_effect = {
	if = {
		limit = {
			NOT = { monthly_income = 15 }
		}
		define_advisor = {
			type = $type$
			skill = 1
			cost_multiplier = $cost_multiplier$
		}
	}
	else_if = {
		limit = {
			NOT = { monthly_income = 25 }
		}
		define_advisor = {
			type = $type$
			skill = 2
			cost_multiplier = $cost_multiplier$
		}
	}
	else = {
		define_advisor = {
			type = $type$
			skill = 3
			cost_multiplier = $cost_multiplier$
		}
	}
}

#Use this one if you want to give as much details as possible for your advisor
generate_very_specific_scaling_advisor_effect = {
	if = {
		limit = {
			NOT = { monthly_income = 15 }
		}
		define_advisor = {
			type = $type$
			skill = 1
			name = $name$
			location = $location$
			cost_multiplier = $cost_multiplier$
			female = $female$
			culture = $culture$
			religion = $religion$
		}
	}
	else_if = {
		limit = {
			NOT = { monthly_income = 25 }
		}
		define_advisor = {
			type = $type$
			skill = 2
			name = $name$
			location = $location$
			cost_multiplier = $cost_multiplier$
			female = $female$
			culture = $culture$
			religion = $religion$
		}
	}
	else = {
		define_advisor = {
			type = $type$
			skill = 3
			name = $name$
			location = $location$
			cost_multiplier = $cost_multiplier$
			female = $female$
			culture = $culture$
			religion = $religion$
		}
	}
}

pick_type_of_military_advisor = {
	random_list = {
		1 = { set_country_flag = generate_army_reformer }
		1 = { set_country_flag = generate_army_organiser }
		1 = { set_country_flag = generate_commandant }
		1 = { set_country_flag = generate_quartermaster }
		1 = { set_country_flag = generate_recruitmaster }
		1 = { set_country_flag = generate_fortification_expert }
		1 = { set_country_flag = generate_grand_captain }
	}
}

clear_random_military_advisor_generation_flags = {
	clr_country_flag = generate_army_reformer
	clr_country_flag = generate_army_organiser
	clr_country_flag = generate_commandant
	clr_country_flag = generate_quartermaster
	clr_country_flag = generate_recruitmaster
	clr_country_flag = generate_fortification_expert
	clr_country_flag = generate_grand_captain
}

#Needs you to have executed pick_type_of_military_advisor
generate_scaled_military_advisor_of_religion_effect = {
	trigger_switch = {
		on_trigger = has_country_flag
		generate_army_reformer = {
			generate_scaled_advisor_of_type_and_religion_effect = {
				type = army_reformer
				religion = $religion$
				discount = $discount$
			}
		}
		generate_army_organiser = {
			generate_scaled_advisor_of_type_and_religion_effect = {
				type = army_organiser
				religion = $religion$
				discount = $discount$
			}
		}
		generate_commandant = {
			generate_scaled_advisor_of_type_and_religion_effect = {
				type = commandant
				religion = $religion$
				discount = $discount$
			}
		}
		generate_quartermaster = {
			generate_scaled_advisor_of_type_and_religion_effect = {
				type = quartermaster
				religion = $religion$
				discount = $discount$
			}
		}
		generate_recruitmaster = {
			generate_scaled_advisor_of_type_and_religion_effect = {
				type = recruitmaster
				religion = $religion$
				discount = $discount$
			}
		}
		generate_fortification_expert = {
			generate_scaled_advisor_of_type_and_religion_effect = {
				type = fortification_expert
				religion = $religion$
				discount = $discount$
			}
		}
		generate_grand_captain = {
			generate_scaled_advisor_of_type_and_religion_effect = {
				type = grand_captain
				religion = $religion$
				discount = $discount$
			}
		}
	}
}

remove_advisor_adm_effect = {
	if = {
		limit = {
			advisor = theologian_a
		}
		remove_advisor = theologian_a
	}
	if = {
		limit = {
			advisor = monk_a
		}
		remove_advisor = monk_a
	}
	if = {
		limit = {
			advisor = architect_a
		}
		remove_advisor = architect_a
	}
	if = {
		limit = {
			advisor = treasurer_a
		}
		remove_advisor = treasurer_a
	}
	if = { 
		limit = {
			advisor = logistician_a
		}
		remove_advisor = logistician_a
	}
	if = {
		limit = {
			advisor = magistrate_a
		}
		remove_advisor = magistrate_a
	}
	if = {
		limit = { 
			advisor = clan_historian_a
		}
		remove_advisor = clan_historian_a
	}
	if = {
		limit = { 
			advisor = clan_elder_a
		}
		remove_advisor = clan_elder_a
	}
	if = {
		limit = { 
			advisor = censor_a
		}
		remove_advisor = censor_a
	}
	if = {
		limit = { 
			advisor = economist_a
		}
		remove_advisor = economist_a
	}
	if = {
		limit = { 
			advisor = bureaucratic_reformer_a
		}
		remove_advisor = bureaucratic_reformer_a
	}
}

generate_traitor_advisor_effect = {
	if = {
		limit = {
			from = {
				has_country_flag = advisor_events_adm
			}
		}
		random_list = {
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					religion = ROOT
					type = theologian_a
				}
				trigger = {
					from = {
						religion = root
					}
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					religion = ROOT
					type = monk_a
				}
				trigger = {
					from = {
						religion = root
					}
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = architect_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = treasurer_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = logistician_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = magistrate_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = clan_historian_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = clan_elder_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = censor_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = economist_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = bureaucratic_reformer_a
				}
			}
		}
	}
	else_if = {
		limit = {
			from = {
				has_country_flag = advisor_events_dip
			}
		}
		random_list = {
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = ninja_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = merchant_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = tea_master_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = poet_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = councillor_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = envoy_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = imperial_courtier_a
				}
			}
			
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = naval_commander_a
				}
				trigger = {
					navy_size = 1
					from = {
						navy_size = 1
					}
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = navigator_a
				}
				trigger = {
					navy_size = 1
					from = {
						navy_size = 1
					}
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = naval_reformer_a
				}
				trigger = {
					navy_size = 1
					from = {
						navy_size = 1
					}
				}
			}
		}
	}
	else = {
		random_list = {
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = vanguard_commander_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = ashigaru_commander_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = teppo_commander_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = cavalry_commander_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = blademaster_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = siege_master_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = military_engineer_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = commandant_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = army_organizer_a
				}
			}
			1 = {
				define_advisor = {
					name = advisor_traitor
					skill = $skill_level$
					culture = ROOT
					type = army_reformer_a
				}
			}
		}
	}
}

generate_exile_advisor_effect = {
	if = {
		limit = {
			NOT = { monthly_income = 15 }
		}
		define_advisor = {
			type = $advisor_type$
			name = fleeing_advisor
			skill = 1
			culture = event_target:exile_country
			religion = event_target:exile_country
			discount = yes
		}
	}
	else_if = {
		limit = {
			NOT = { monthly_income = 25 }
		}
		define_advisor = {
			type = $advisor_type$
			name = fleeing_advisor
			skill = 2
			culture = event_target:exile_country
			religion = event_target:exile_country
			discount = yes
		}
	}
	else = {
		define_advisor = {
			type = $advisor_type$
			name = fleeing_advisor
			skill = 3
			culture = event_target:exile_country
			religion = event_target:exile_country
			discount = yes
		}
	}
}

#Specify ADM/DIP/MIL = yes
kill_advisor_by_category_effect = {
	[[ADM]
		trigger_switch = {
			on_trigger = advisor
			theologian_a = { kill_advisor = theologian_a }
			monk_a = { kill_advisor = monk_a }
			architect_a = { kill_advisor = architect_a }
			treasurer_a = { kill_advisor = treasurer_a }
			logistician_a = { kill_advisor = logistician_a }
			magistrate_a = { kill_advisor = magistrate_a }
			clan_historian_a = { kill_advisor = clan_historian_a }
			clan_elder_a = { kill_advisor = clan_elder_a }
			censor_a = { kill_advisor = censor_a }
			economist_a = { kill_advisor = economist_a }
			bureaucratic_reformer_a = { kill_advisor = bureaucratic_reformer_a }
		}
	]
	[[DIP]
		trigger_switch = {
			on_trigger = advisor
			ninja_a = { kill_advisor = ninja_a }
			merchant_a = { kill_advisor = merchant_a }
			tea_master_a = { kill_advisor = tea_master_a }
			poet_a = { kill_advisor = poet_a }
			councillor_a = { kill_advisor = councillor_a }
			envoy_a = { kill_advisor = envoy_a }
			imperial_courtier_a = { kill_advisor = imperial_courtier_a }
			naval_commander_a = { kill_advisor = naval_commander_a }
			navigator_a = { kill_advisor = navigator_a }
			naval_reformer_a = { kill_advisor = naval_reformer_a }
		}
	]
	[[MIL]
		trigger_switch = {
			on_trigger = advisor
			army_reformer_a = { kill_advisor = army_reformer_a }
			army_organizer_a = { kill_advisor = army_organizer_a }
			commandant_a = { kill_advisor = commandant_a }
			military_engineer_a = { kill_advisor = military_engineer_a }
			siege_master_a = { kill_advisor = siege_master_a }
			blademaster_a = { kill_advisor = blademaster_a }
			cavalry_commander_a = { kill_advisor = cavalry_commander_a }
			teppo_commander_a = { kill_advisor = teppo_commander_a }
			ashigaru_commander_a = { kill_advisor = ashigaru_commander_a }
			vanguard_commander_a = { kill_advisor = vanguard_commander_a }
		}
	]
}







